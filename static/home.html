<title>📊 Business Dashboard</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f4f4f4;
    margin: 0;
    padding: 20px;
  }
  h1 {
    text-align: center;
    margin-bottom: 30px;
  }
  .section {
    margin-bottom: 40px;
  }
  .grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
  }
  .card {
    background: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  }
  .card h2 {
    margin-top: 0;
    font-size: 1.2em;
    color: #333;
  }
  .metric {
    font-size: 1.5em;
    color: #0077cc;
    margin: 10px 0;
  }
  .list {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  .list li {
    margin: 5px 0;
  }
  .controls {
    margin: 20px 0;
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    align-items: center;
  }
  .controls select,
  .controls button {
    padding: 8px 12px;
    font-size: 1em;
    border-radius: 4px;
    border: 1px solid #ccc;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
  }
  table th,
  table td {
    border: 1px solid #ddd;
    padding: 10px;
    text-align: left;
  }
  th {
    background-color: #f0f0f0;
  }
  td[contenteditable] {
    background-color: #fff8dc;
    cursor: text;
  }
</style>
<h1>📊 Business Management Dashboard</h1>

<!-- 🧍 Section 1: User Summary -->
<div class="section">
  <div class="grid">
    <!-- Costs Summary -->
    <div class="card">
      <h2>💰 Costs</h2>
      <div class="metric" id="month_name">This Month:</div>
      <ul class="list">
        <li id="total-spend">Total Spend: ...</li>
        <li id="total-costs">Total Costs: ...</li>
        <li id="avg-spend">Avg Monthly Spend: ...</li>
        <li id="top-cost">Top Cost: ...</li>
        <li id="lowest-cost">Lowest Cost: ...</li>
      </ul>
    </div>

    <!-- Users Summary -->
    <div class="card">
      <h2>👤 Users</h2>
      <div class="metric" id="total-users">Total Users: ...</div>
      <ul class="list" id="roles-list">
        <!-- Roles will be inserted here -->
      </ul>
    </div>

    <!-- NEW: Total Outcome Summary -->
    <div class="card">
      <h2>📊 Total Outcome</h2>
      <div class="metric" id="outcome-month">This Month:</div>
      <ul class="list">
        <li id="outcome-total">Total Outcome (in toman): ...</li>
        <li id="outcome-salaries">Salaries: ...</li>
        <li id="outcome-costs">Costs: ...</li>
        <li id="outcome-percent">Breakdown: ...</li>
      </ul>
    </div>
  </div>

  <!-- Salaries Card (unchanged) -->
  <div class="card">
    <h2>🧑‍💼 Salaries</h2>
    <div class="grid">
      <!-- Left: Salary Summary -->
      <div>
        <h3>📊 Summary</h3>
        <div class="metric" id="salary-month_name">This Month:</div>
        <ul class="list">
          <li id="salary-total-paid">Total Paid: ...</li>
          <li id="salary-total-hours">Total Hours: ...</li>
          <li id="salary-avg-rate">Avg Hourly Rate: ...</li>
          <li id="salary-record-count">Salary Records: ...</li>
        </ul>
      </div>

      <!-- Right: Role Breakdown -->
      <div>
        <h3>🧑‍💼 By Role</h3>
        <table id="role-salary-table">
          <thead>
            <tr>
              <th>Role</th>
              <th>Total Salary (in toman)</th>
              <th>Avg Rate</th>
              <th>Total Hours</th>
            </tr>
          </thead>
          <tbody>
            <!-- Rows will be inserted here -->
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- 📦 Section 2: Detailed Data (Costs + Salaries) -->

<!-- 📦 Section 2: Detailed Data (Costs + Salaries) -->
<div class="card">
  <div class="card-body">
    <h2 class="h5 mb-3">📊 Data Viewer</h2>

    <!-- Filter Form -->
    <form id="filterForm" class="row g-2 mb-3">
      <div class="col-md-2">
        <select id="entity" class="form-select">
          <option value="costs">💰 Costs</option>
          <option value="salaries">🧑‍💼 Salaries</option>
        </select>
      </div>
      <div class="col-md-2">
        <input
          type="number"
          id="startYear"
          class="form-control"
          placeholder="Start Year"
        />
      </div>
      <div class="col-md-2">
        <input
          type="number"
          id="startMonth"
          class="form-control"
          placeholder="Start Month"
          min="1"
          max="12"
        />
      </div>
      <div class="col-md-2">
        <input
          type="number"
          id="endYear"
          class="form-control"
          placeholder="End Year"
        />
      </div>
      <div class="col-md-2">
        <input
          type="number"
          id="endMonth"
          class="form-control"
          placeholder="End Month"
          min="1"
          max="12"
        />
      </div>
      <div class="col-md-2">
        <button type="submit" class="btn btn-primary w-100">Get Data</button>
      </div>
    </form>

    <!-- Data Table -->
    <div class="table-responsive">
      <table id="dataTable" class="table table-striped table-bordered">
        <thead></thead>
        <tbody></tbody>
      </table>
    </div>
  </div>
</div>

<!-- Bootstrap Modal -->
<div class="modal fade" id="detailModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalTitle">Details</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
        ></button>
      </div>
      <div class="modal-body">
        <div class="table-responsive">
          <table id="detailTable" class="table table-sm table-hover">
            <thead></thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
